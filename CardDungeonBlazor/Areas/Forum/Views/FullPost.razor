@page "/posts/{id}/more"
@using CardDungeonBlazor.Areas.Forum.Controlls
@inherits FullPostController

<MudItem Class="d-flex justify-center py-2 px-1 mt-6">
    <MudCard>
        @if (!String.IsNullOrWhiteSpace(Model.Image))
        {
                    <MudCardMedia Image="@Model.Image" />
        }
        <MudCardContent>
            <MudText Typo="Typo.h5">User @Model.Username</MudText>
            <MudText Typo="Typo.body2">posted @Model.Text</MudText>
            <MudText Typo="Typo.body2">This post was created on @Model.CreatedOn</MudText>
            <MudIcon Icon="@Icons.Material.Outlined.ThumbUp">@Model.Likes</MudIcon>
            <MudNavGroup Title="Comments" Expanded="false">
                @if (Model.Comments.Any())
            {
                    foreach(var comment in Model.Comments)
                    {
                        <MudCard>
        @if (!String.IsNullOrWhiteSpace(comment.Image))
        {
                    <MudCardMedia Image="@comment.Image" />
        }
        <MudCardContent>
            <MudText Typo="Typo.h5">User @comment.Username</MudText>
            <MudText Typo="Typo.body2">commented @comment.Text</MudText>
            <MudText Typo="Typo.body2">on @comment.CreatedOn</MudText>
            <MudIcon Icon="@Icons.Material.Outlined.ThumbUp">@comment.Likes</MudIcon>
        </MudCardContent>
    </MudCard>
                    }
            }
            @if(addingComment){
                <EditForm Model="@CommentModel" OnValidSubmit="Submit">
    <DataAnnotationsValidator />
    <MudCard Class="pa-4">
        <MudCardContent>
            <MudTextField Label="Text" Class="mt-3" @bind-Value="CommentModel.Text" For="@(() => CommentModel.Text)" />
            <MudTextField Label="Image" Class="mt-3" @bind-Value="CommentModel.Image" For= "@(() => CommentModel.Image)" />
        </MudCardContent>
        <MudCardActions>
            <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Class="ml-auto">Add Post</MudButton>
        </MudCardActions>
    </MudCard>
</EditForm>
            }
            
            <MudButton OnClick="AddComment">Coment</MudButton>
            </MudNavGroup>
        </MudCardContent>
    </MudCard>
</MudItem>
