@page "/card/show/{id}"
@using CardDungeonBlazor.Models;
@using CardDungeonBlazor.Controls;
@inject CardDungeonBlazor.Data.ApplicationDbContext dbcontext;
@inject NavigationManager navManager;


<MudItem Class="d-flex justify-center py-2 px-1 mt-6">
    <MudCard>
        <MudCardMedia Image="@Model.ImageUrl" />
        <MudCardContent>
            <MudText Typo="Typo.h5">Card with name @Model.Name</MudText>
            <MudText Typo="Typo.body2">With a value of @Model.Value @Model.CardType . The description of this card is @Model.Description</MudText>
            <MudText Typo="Typo.body2">This card was created on @Model.CreatedOn</MudText>
            @if (Model.Duration > 0)
            {
                <MudText Typo="Typo.body2">The efect of this card lasts for @Model.Duration turns</MudText>
            }

        </MudCardContent>
        <MudCardActions>
            <MudButton Variant="Variant.Text" Color="Color.Primary" @onclick="() => Redirect()">Go back to all cards</MudButton>
        </MudCardActions>
    </MudCard>
</MudItem>



@code
{
    [Parameter]
    public string Id { get; set; }
    FullCardViewModel Model;

    protected override void OnInitialized()
    {
        Model = new FullCardViewModel();
        CardsControler cardsControler = new CardsControler(dbcontext);
        Model = cardsControler.GetFullCardView(Id);
    }
    void Redirect()
    {
        navManager.NavigateTo("/cards/all");
    }
}
