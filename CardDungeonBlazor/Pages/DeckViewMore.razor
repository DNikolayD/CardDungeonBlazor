@page "/deck/show/{id}"
@using CardDungeonBlazor.Models;
@using CardDungeonBlazor.Controls;
@inject CardDungeonBlazor.Data.ApplicationDbContext dbcontext;
@inject NavigationManager navManager;


<MudItem Class="d-flex justify-center py-2 px-1 mt-6">
    <MudCard>
        <MudCardContent>
            <MudText Typo="Typo.h5">Deck with name @Model.Name</MudText>
            <MudText Typo="Typo.body2">with description @Model.Description and @Model.NumberOfCards Cards</MudText>
            <MudText Typo="Typo.body2">This card was created on @Model.CreatedOn</MudText>
        </MudCardContent>
        <MudCardActions>
            <MudButton Variant="Variant.Text" Color="Color.Primary" @onclick="() => Redirect()">Go back to all Decks</MudButton>
        </MudCardActions>
    </MudCard>
</MudItem>



@code
{
    [Parameter]
    public string Id { get; set; }
    FullDeckViewModel Model;

    protected override void OnInitialized()
    {
        Model = new FullDeckViewModel();
        DecksController decksController = new DecksController(dbcontext);
        Model = decksController.GetFullDeckView(Id);
    }
    void Redirect()
    {
        navManager.NavigateTo("/decks/all");
    }
}
